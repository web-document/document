<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Cordova 实践开发 | 前端文档</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="~~~~~~~~~">
    
    <link rel="preload" href="/document/assets/css/0.styles.1a136118.css" as="style"><link rel="preload" href="/document/assets/js/app.53e7559d.js" as="script"><link rel="preload" href="/document/assets/js/2.faf7f4ea.js" as="script"><link rel="preload" href="/document/assets/js/15.c73f03e1.js" as="script"><link rel="prefetch" href="/document/assets/js/10.fed02792.js"><link rel="prefetch" href="/document/assets/js/11.7636cd35.js"><link rel="prefetch" href="/document/assets/js/12.3c74c3f6.js"><link rel="prefetch" href="/document/assets/js/13.d1cfcdff.js"><link rel="prefetch" href="/document/assets/js/14.df98f487.js"><link rel="prefetch" href="/document/assets/js/16.660ebdff.js"><link rel="prefetch" href="/document/assets/js/17.b267c578.js"><link rel="prefetch" href="/document/assets/js/18.8c6bd0cb.js"><link rel="prefetch" href="/document/assets/js/19.4db9574e.js"><link rel="prefetch" href="/document/assets/js/20.628bfabf.js"><link rel="prefetch" href="/document/assets/js/21.21e38bf6.js"><link rel="prefetch" href="/document/assets/js/22.0f4e67f4.js"><link rel="prefetch" href="/document/assets/js/23.c2c168a2.js"><link rel="prefetch" href="/document/assets/js/24.cffc48c4.js"><link rel="prefetch" href="/document/assets/js/25.adef0ae6.js"><link rel="prefetch" href="/document/assets/js/3.346a6b77.js"><link rel="prefetch" href="/document/assets/js/4.4a19eea0.js"><link rel="prefetch" href="/document/assets/js/5.835e831f.js"><link rel="prefetch" href="/document/assets/js/6.4faa97a6.js"><link rel="prefetch" href="/document/assets/js/7.33057231.js"><link rel="prefetch" href="/document/assets/js/8.53ab3093.js"><link rel="prefetch" href="/document/assets/js/9.1f7bc0bf.js">
    <link rel="stylesheet" href="/document/assets/css/0.styles.1a136118.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/document/" class="home-link router-link-active"><img src="/document/images/logo.png" alt="前端文档" class="logo"> <span class="site-name can-hide">前端文档</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/document/" class="nav-link">
  首页
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/document/" class="nav-link">
  首页
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/document/docs/vuepress搭建博客详解.html" class="sidebar-link">vuepress搭建博客详解</a></li><li><a href="/document/docs/vuepress+koa搭建博客详解.html" class="sidebar-link">vuepress+koa搭建博客详解</a></li><li><a href="/document/docs/vue-cli3.0打包之后去掉打印.html" class="sidebar-link">vue-cli3.0打包之后去掉打印</a></li><li><a href="/document/docs/vue自定义loading组件以及相关用法.html" class="sidebar-link">自定义 loading 组件</a></li><li><a href="/document/docs/获取图片相对坐标.html" class="sidebar-link">获取图片相对坐标</a></li><li><a href="/document/docs/解决全朗e家白屏问题.html" class="sidebar-link">解决全朗e家白屏问题</a></li><li><a href="/document/docs/解决element-message弹出多次的问题.html" class="sidebar-link">解决element-message弹出多次的问题</a></li><li><a href="/document/docs/electron和electron-vue的简单介绍.html" class="sidebar-link">electron和electron-vue的简单介绍</a></li><li><a href="/document/docs/vue-element-admin学习总结.html" class="sidebar-link">vue-element-admin学习总结</a></li><li><a href="/document/docs/解决vue-element-admin Tags-view标签刷新消失问题.html" class="sidebar-link">解决vue-element-admin Tags-view标签刷新消失问题</a></li><li><a href="/document/docs/vue添加路由转场动画.html" class="sidebar-link">vue添加路由转场动画</a></li><li><a href="/document/docs/Cordova相关总结.html" class="active sidebar-link">Cordova相关总结</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/document/docs/Cordova相关总结.html#简单认知-cordova" class="sidebar-link">简单认知 Cordova</a></li><li class="sidebar-sub-header"><a href="/document/docs/Cordova相关总结.html#三种移动开发的分类" class="sidebar-link">三种移动开发的分类</a></li><li class="sidebar-sub-header"><a href="/document/docs/Cordova相关总结.html#cordova-的架构" class="sidebar-link">Cordova 的架构</a></li><li class="sidebar-sub-header"><a href="/document/docs/Cordova相关总结.html#cordova-环境配置" class="sidebar-link">Cordova 环境配置</a></li><li class="sidebar-sub-header"><a href="/document/docs/Cordova相关总结.html#第一个应用程序的编译" class="sidebar-link">第一个应用程序的编译</a></li><li class="sidebar-sub-header"><a href="/document/docs/Cordova相关总结.html#第一个项目的目录大致认知" class="sidebar-link">第一个项目的目录大致认知</a></li><li class="sidebar-sub-header"><a href="/document/docs/Cordova相关总结.html#cordova-事件的基本监听" class="sidebar-link">Cordova 事件的基本监听</a></li><li class="sidebar-sub-header"><a href="/document/docs/Cordova相关总结.html#卸载插件" class="sidebar-link">卸载插件</a></li><li class="sidebar-sub-header"><a href="/document/docs/Cordova相关总结.html#cordova-插件的使用" class="sidebar-link">Cordova 插件的使用</a></li><li class="sidebar-sub-header"><a href="/document/docs/Cordova相关总结.html#config-xml" class="sidebar-link">Config.xml</a></li><li class="sidebar-sub-header"><a href="/document/docs/Cordova相关总结.html#cordova-vue" class="sidebar-link">cordova vue</a></li><li class="sidebar-sub-header"><a href="/document/docs/Cordova相关总结.html#使用cordova打包vue项目的流程" class="sidebar-link">使用Cordova打包vue项目的流程</a></li><li class="sidebar-sub-header"><a href="/document/docs/Cordova相关总结.html#问题解决记录" class="sidebar-link">问题解决记录</a></li></ul></li><li><a href="/document/docs/gfy-mobile-template.html" class="sidebar-link">gfy-mobile-template</a></li><li><a href="/document/docs/gfy-pc-template.html" class="sidebar-link">gfy-pc-template</a></li><li><a href="/document/docs/如何接入fundebug.html" class="sidebar-link">如何接入fundebug</a></li><li><a href="/document/docs/要记得东西.html" class="sidebar-link">要记得东西</a></li><li><a href="/document/docs/node/如何使用nvm管理node版本.html" class="sidebar-link">如何使用nvm管理node版本</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="cordova-实践开发"><a href="#cordova-实践开发" class="header-anchor">#</a> Cordova 实践开发</h1> <h2 id="简单认知-cordova"><a href="#简单认知-cordova" class="header-anchor">#</a> 简单认知 Cordova</h2> <h3 id="什么是-cordova"><a href="#什么是-cordova" class="header-anchor">#</a> 什么是 Cordova</h3> <p>官网：http://cordova.axuer.com/</p> <ul><li>一个移动应用开发框架</li> <li>本质是 HTML、CSS、JavaScript 外面包装个原生的壳</li> <li>出自于 Adobe 11 年收购的 PhoneGap，是驱动 PhoneGap 的核心引擎</li> <li>是 Apache 的顶级开源项目</li></ul> <p>Cordova 提供了一系列设备相关的 API，通过这组 API，移动应用能够以 JavaScript 访问原生的设备功能，如摄像头、麦克风。</p> <h2 id="三种移动开发的分类"><a href="#三种移动开发的分类" class="header-anchor">#</a> 三种移动开发的分类</h2> <h3 id="常见的移动端开发的三大分类"><a href="#常见的移动端开发的三大分类" class="header-anchor">#</a> 常见的移动端开发的三大分类</h3> <p>1、原生 App
2、Web App
3、混合 App（Hybrid App）</p> <h3 id="cordova-的优缺点"><a href="#cordova-的优缺点" class="header-anchor">#</a> Cordova 的优缺点</h3> <p>优点：跨平台，便于移植，开发快速，成本低。
缺点：执行速度相对原生会慢一些，一次编写，要处处调试。</p> <h2 id="cordova-的架构"><a href="#cordova-的架构" class="header-anchor">#</a> Cordova 的架构</h2> <p><a href="http://cordova.axuer.com/static/img/guide/cordovaapparchitecture.png" target="_blank" rel="noopener noreferrer"><img src="http://cordova.axuer.com/static/img/guide/cordovaapparchitecture.png" alt="Cordova架构"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="http://cordova.axuer.com/static/img/guide/cordovaapparchitecture.png" target="_blank" rel="noopener noreferrer">Cordova架构<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ul><li>Web App：存放应用程序代码的地方，体现是你的具体业务逻辑模块。</li> <li>WebView：给应用提供完整的用户访问呈现。</li> <li>Cordova Plugins：提供了和原生组件通信的接口并绑定到了标准的设备 API,将来通过 JavaScript 来调用。</li></ul> <h2 id="cordova-环境配置"><a href="#cordova-环境配置" class="header-anchor">#</a> Cordova 环境配置</h2> <h3 id="cordova-在整个-app-领域中的位置"><a href="#cordova-在整个-app-领域中的位置" class="header-anchor">#</a> Cordova 在整个 App 领域中的位置</h3> <p><a href="https://s2.ax1x.com/2020/03/11/8kSvJx.png" target="_blank" rel="noopener noreferrer"><img src="https://s2.ax1x.com/2020/03/11/8kSvJx.png" alt="Cordova 在整个 App 领域中的位置"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://s2.ax1x.com/2020/03/11/8kSvJx.png" target="_blank" rel="noopener noreferrer">Cordova 在整个 App 领域中的位置<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="cordova-环境安装"><a href="#cordova-环境安装" class="header-anchor">#</a> Cordova 环境安装</h3> <p>1、Git 的安装
2、Node.js 的安装
3、安装 Cordova Cli 下载并安装 Cordova 全局模块</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>npm install -g cordova  /  cnpm install -g cordova 
npm install -g cordova --registry=https://registry.npm.taobao.org
cnpm install -g cordova@8.1.2 // 安装指定版本
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>4、安装 Java JDK</p> <p>下载地址：https://www.oracle.com/java/technologies/javase-downloads.html</p> <p>查看版本：<strong>java -version</strong></p> <p>有关JDK的安装，参考：https://yiibai.com/java/java_environment_setup.html</p> <p>5、安装 Android Studio 安装 Android SDK</p> <p>官网地址：http://www.android-studio.org/</p> <p>安装参考：https://www.yiibai.com/android/android_environment_setup.html</p> <h4 id="环境相关"><a href="#环境相关" class="header-anchor">#</a> 环境相关</h4> <ul><li><p><a href="https://www.cnblogs.com/qirui/p/8421372.html" target="_blank" rel="noopener noreferrer">整体环境1<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="https://www.cnblogs.com/wenbinjiang/p/11776782.html" target="_blank" rel="noopener noreferrer">整体环境2<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="https://segmentfault.com/a/1190000020880025?utm_source=tag-newest" target="_blank" rel="noopener noreferrer">整体环境3<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="https://blog.csdn.net/weixin_43765499/article/details/89142608" target="_blank" rel="noopener noreferrer">整体环境4<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="https://zhuanlan.zhihu.com/p/89463566?from_voters_page=true" target="_blank" rel="noopener noreferrer">整体环境--知乎<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="https://blog.csdn.net/qq_41995919/article/details/101369874" target="_blank" rel="noopener noreferrer">整体环境--完整版<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="http://hexo.wbjiang.cn/gradle%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA.html" target="_blank" rel="noopener noreferrer">gradle环境搭建<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="http://hexo.wbjiang.cn/jdk%E4%B8%8B%E8%BD%BD%E5%92%8C%E5%AE%89%E8%A3%85%E7%AE%80%E6%98%8E%E6%95%99%E7%A8%8B.html" target="_blank" rel="noopener noreferrer">java环境搭建<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li></ul> <h2 id="第一个应用程序的编译"><a href="#第一个应用程序的编译" class="header-anchor">#</a> 第一个应用程序的编译</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>cordova --version // 查看 cordova 安装的版本
10.0.0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="创建项目"><a href="#创建项目" class="header-anchor">#</a> 创建项目</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>cordova create 项目名 com.公司名.项目名 类名（建议） // 创建一个空的Cordova项目
cordova create cordovademo02 com.itying.cordova Cordovademo

cordova create MyApp // 创建一个空的Cordova项目
cordova help create // 要获得完整的选项集，请运行
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>cordova 创建项目报错解决方法：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>卸载 cordova npm uninstall -g cordova
删掉 cordova 文件 npm\node_modules\cordova
npm install -g cordova --registry=https://registry.npm.taobao.org
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="添加平台"><a href="#添加平台" class="header-anchor">#</a> 添加平台</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>cd MyApp
cordova platform add android // 添加平台
cordova platform // 获取完整的平台列表,请运行
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="运行项目"><a href="#运行项目" class="header-anchor">#</a> 运行项目</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>cordova run android  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>项目的 platforms 下 android目录 导入 android studio 进行运行调试 （或者运行 cordova run android）</p> <p>创建项目的时候注意包名称：发布上线打包的时候用到包名称，注意</p> <p>修改应用包名称参考：http://www.ionic.wang/article-index-id-91.html</p> <p>1、修改 config.xml 里面的包名称</p> <p>2、修改完成以后重新执行 cordova platform add android</p> <p>修改项目后，运行 cordova prepare</p> <p>实际编译 platforms \android\app\src\main\assets\www</p> <h3 id="编译项目"><a href="#编译项目" class="header-anchor">#</a> 编译项目</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>cordova build android
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="打包报错"><a href="#打包报错" class="header-anchor">#</a> 打包报错</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>Checking Java JDK and Android SDK versions
ANDROID_SDK_ROOT=undefined (recommended setting)
ANDROID_HOME=F:\software\Android\Sdk (DEPRECATED)
Could not find an installed version of Gradle either in Android Studio,
or on your system to install the gradle wrapper. Please include gradle
in your path, or install Android Studio
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>方法一：</p> <p>用 Android Studio 打开 Android 目录 进项打包。</p> <p><a href="https://s2.ax1x.com/2020/03/11/8AVUMR.png" target="_blank" rel="noopener noreferrer"><img src="https://s2.ax1x.com/2020/03/11/8AVUMR.png" alt="用 Android Studio 打开打包"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://s2.ax1x.com/2020/03/11/8AVUMR.png" target="_blank" rel="noopener noreferrer">用 Android Studio 打开打包<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>包所在的位置：android\app\build\outputs\apk\debug</p> <p>方法二：</p> <p>根据上面的报错信息可以得出
1、没有找到 Gradle
2、需要设置环境变量 ANDROID_SDK_ROOT
3、Android SDK 在 F:\software\Android\Sdk</p> <p>如果不知道 Android SDK 在什么位置可以如下操作：</p> <p>打开 Android Studio</p> <p><a href="https://s2.ax1x.com/2020/03/11/8kdum6.png" target="_blank" rel="noopener noreferrer"><img src="https://s2.ax1x.com/2020/03/11/8kdum6.png" alt="查看 sdk 路径配置"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://s2.ax1x.com/2020/03/11/8kdum6.png" target="_blank" rel="noopener noreferrer">查看 sdk 路径配置<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://s2.ax1x.com/2020/03/11/8kwZ4g.png" target="_blank" rel="noopener noreferrer"><img src="https://s2.ax1x.com/2020/03/11/8kwZ4g.png" alt="查看 sdk 路径配置">查看 sdk 路径配置<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>环境变量配置如下</p> <p><a href="https://s2.ax1x.com/2020/03/11/8AexGF.png" target="_blank" rel="noopener noreferrer"><img src="https://s2.ax1x.com/2020/03/11/8AexGF.png" alt="环境变量配置"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://s2.ax1x.com/2020/03/11/8AexGF.png" target="_blank" rel="noopener noreferrer">环境变量配置<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>初次安装 Android Studio 时会安装 gradle</p> <p><a href="https://s2.ax1x.com/2020/03/11/8AQOaR.png" target="_blank" rel="noopener noreferrer"><img src="https://s2.ax1x.com/2020/03/11/8AQOaR.png" alt="查看 gradle 目录"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://s2.ax1x.com/2020/03/11/8AQOaR.png" target="_blank" rel="noopener noreferrer">查看 gradle 目录<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://s2.ax1x.com/2020/03/11/8AlsF1.png" target="_blank" rel="noopener noreferrer"><img src="https://s2.ax1x.com/2020/03/11/8AlsF1.png" alt="查看 gradle 目录">查看 gradle 目录<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>在上面路径基础上 + \wrapper\dists 你就会看到 gradle 的包了。
例如：C:\Users\86183.gradle + \wrapper\dists</p> <p><a href="https://s2.ax1x.com/2020/03/11/8A31Cq.png" target="_blank" rel="noopener noreferrer"><img src="https://s2.ax1x.com/2020/03/11/8A31Cq.png" alt="gradle包"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://s2.ax1x.com/2020/03/11/8A31Cq.png" target="_blank" rel="noopener noreferrer">gradle包<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>在系统变量中 path 下添加 gradle/bin 的路径</p> <p>例如：C:\Users\86183.gradle\wrapper\dists\gradle-5.6.4-all\ankdp27end7byghfw1q2sw75f\gradle-5.6.4\bin</p> <p><a href="https://s2.ax1x.com/2020/03/11/8ADJYT.png" target="_blank" rel="noopener noreferrer"><img src="https://s2.ax1x.com/2020/03/11/8ADJYT.png" alt="gradle"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://s2.ax1x.com/2020/03/11/8ADJYT.png" target="_blank" rel="noopener noreferrer">gradle<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="第一个项目的目录大致认知"><a href="#第一个项目的目录大致认知" class="header-anchor">#</a> 第一个项目的目录大致认知</h2> <ul><li>config.xml 配置页，配置起始页项目名称等基础内容</li> <li>hooks 存放一些自定义扩展功能</li> <li>platforms 存放添加的 platform 运行时</li> <li>plugins 存放引入的插件</li> <li>www 开发的 HTML5 目录</li></ul> <p>实际打包文件 ：platforms /android/app/src/main/assets/www</p> <h2 id="cordova-事件的基本监听"><a href="#cordova-事件的基本监听" class="header-anchor">#</a> Cordova 事件的基本监听</h2> <h3 id="cordova-插件和事件说明"><a href="#cordova-插件和事件说明" class="header-anchor">#</a> Cordova 插件和事件说明</h3> <p>Cordova 对于设备功能的封装，都是以事件或插件体现的</p> <p>插件即 plugin，封装了设备提供的功能，如摄像头、通讯录、GPS 等，他们是以自定义的 js 根对象或者覆盖标准对象的方式提供的，插件需要单独安装才能使用。</p> <h3 id="cordova-事件概览"><a href="#cordova-事件概览" class="header-anchor">#</a> Cordova 事件概览</h3> <table><thead><tr><th style="text-align:left;">事件名称</th> <th style="text-align:left;">说明</th></tr></thead> <tbody><tr><td style="text-align:left;">deviceready</td> <td style="text-align:left;">当 Cordova 加载完成后该事件被触发</td></tr> <tr><td style="text-align:left;">pause</td> <td style="text-align:left;">当应用程序被置于后台，则触发此事件</td></tr> <tr><td style="text-align:left;">resume</td> <td style="text-align:left;">当应用程序从后台返回，则触发此事件</td></tr> <tr><td style="text-align:left;">backbutton</td> <td style="text-align:left;">当按下后退按钮时，则触发此事件</td></tr> <tr><td style="text-align:left;">……</td> <td style="text-align:left;">……</td></tr></tbody></table> <h3 id="cordova-事件的使用"><a href="#cordova-事件的使用" class="header-anchor">#</a> Cordova 事件的使用</h3> <p>所有的事件调用方式类似，通过 js 进行事件监听即可（addEventListener）</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>document.addEventListener(&quot;deviceready&quot;, onDeviceReady,false);function onDeviceReady() {  document.addEventListener(&quot;pause&quot;, onPause, false);  document.addEventListener(&quot;resume&quot;, onResume, false);  document.addEventListener(&quot;menubutton&quot;, onMenuKeyDown, false);  //给其他事件添加类似的监听}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="cordova-应用启动流程"><a href="#cordova-应用启动流程" class="header-anchor">#</a> Cordova 应用启动流程</h3> <p>html 页面加载流程
1、原生代码启动
2、splashscreen
3、load html
4、顺序执行 JavaScript =&gt; cordova.js 也执行
5、$(document).ready() 执行，cordova 中的事件不一定可用。
6、注册 deviceready 事件</p> <p>代码示例：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>/* * Cordova 对于设备 api 的封装，都是以 插件 和 事件 的方式体现的 * Cordova 中对于事件的监听，都类似 *//* * 1、deviceready 设备 api 准备就绪时，执行 * 基于设备 api 的一些底层事件 或方法，都要在 deviceready 事件调用完成后，执行 * 2、pause 当应用挂起进入后台时，调用执行 * 3、resume 当应用回到最前面时，调用执行 * 4、backbutton 当返回键被点击时，调用 *//* * deviceready 设备 api 准备就绪时，调用 * 参数1：事件名 * 参数2：回调函数 * 参数3：是否在捕获阶段执行，默认 false（冒泡阶段执行），直接默认即可 */// 等待是底层 cordova 相关的一些设备代码的加载
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'deviceready'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'设备api准备就绪, 可以进行其他方法的调用 或者 事件的监听'</span><span class="token punctuation">)</span>
  <span class="token comment">// 添加应用挂起监听</span>
  document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'pause'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'应用程序被挂起了'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'resume'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'应用程序回来了'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'backbutton'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'返回键被点击了'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 输出日志内容到屏幕body中</span>
<span class="token keyword">function</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token parameter">msg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> p <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">)</span>
  p<span class="token punctuation">.</span>style<span class="token punctuation">.</span>fontSize <span class="token operator">=</span> <span class="token string">'14px'</span>
  p<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> msg
  <span class="token comment">// 输出到 body 中</span>
  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h2 id="卸载插件"><a href="#卸载插件" class="header-anchor">#</a> 卸载插件</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>cordova plugin rm cordova-plugin-network-information
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="cordova-插件的使用"><a href="#cordova-插件的使用" class="header-anchor">#</a> Cordova 插件的使用</h2> <h3 id="设备"><a href="#设备" class="header-anchor">#</a> 设备</h3> <p>1、安装插件</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>cordova plugin add cordova-plugin-device
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="网络"><a href="#网络" class="header-anchor">#</a> 网络</h3> <p>1、安装插件</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>cordova plugin add cordova-plugin-network-information
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="设备位置"><a href="#设备位置" class="header-anchor">#</a> 设备位置</h3> <p>1、安装插件</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>cordova plugin add cordova-plugin-geolocation
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="文件"><a href="#文件" class="header-anchor">#</a> 文件</h3> <p>1、安装插件</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>cordova plugin add cordova-plugin-file-transfer // 文件传输插件cordova plugin add cordova-plugin-file // 文件插件
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id=""><a href="#" class="header-anchor">#</a></h3> <h2 id="config-xml"><a href="#config-xml" class="header-anchor">#</a> Config.xml</h2> <p>更改名称</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;widget ...&gt;  &lt;name&gt;HelloCordova&lt;/name&gt;&lt;/widget&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>更改描述</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;widget ...&gt;  &lt;description&gt;A sample Apache Cordova application&lt;/description&gt;&lt;/widget&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>更改图标</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;widget ...&gt;  &lt;icon src=&quot;res/icon.png&quot; /&gt;&lt;/widget&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="cordova-vue"><a href="#cordova-vue" class="header-anchor">#</a> cordova vue</h2> <p>把 vue 项目打包成 app：</p> <p>1、npm run build （注意：图片 目录的路径）</p> <p>2、把 vue 打包后的静态资源复制到 cordova 项目里面</p> <p>3、运行 cordova prepare</p> <p>注意：</p> <p>vue init webpack-simple 项目名称</p> <p>修改：webpack.config.js 里面 publicPath</p> <p>把 publicPath：’/dist’’ 改为 publicPath：’dist/‘</p> <p>修改 index 里面引入 dist 的路径 去掉前面的 / （重要）</p> <p>vue init webpack 项目名称</p> <p>修改：config/index.js 把 assetsPublicPath: ‘/‘, 修改成 assetsPublicPath: ‘./‘</p> <h2 id="使用cordova打包vue项目的流程"><a href="#使用cordova打包vue项目的流程" class="header-anchor">#</a> 使用Cordova打包vue项目的流程</h2> <p>目前使用Cordova的项目：<strong>ai慧学、全朗e家，教师app</strong></p> <h3 id="拉取最新项目代码"><a href="#拉取最新项目代码" class="header-anchor">#</a> 拉取最新项目代码</h3> <blockquote><p>git pull</p></blockquote> <h3 id="打包dist-文件"><a href="#打包dist-文件" class="header-anchor">#</a> 打包dist 文件</h3> <blockquote><p>npm run sit</p></blockquote> <h3 id="修改www文件夹"><a href="#修改www文件夹" class="header-anchor">#</a> 修改www文件夹</h3> <p>将打包好的dist文件夹里面的文件复制到Cordova项目www文件夹内</p> <h3 id="打包安卓apk"><a href="#打包安卓apk" class="header-anchor">#</a> 打包安卓apk</h3> <blockquote><p>cordova build android --release</p> <p>//可以一起执行</p> <p>sudo cordova build android --release &amp;&amp; jarsigner -verbose -keystore webteacher -signedjar gfy_signed.apk /Users/it/code/teacher-app/webapp-teacher/platforms/android/app/build/outputs/apk/release/app-release-unsigned.apk key0</p></blockquote> <h4 id="android签名"><a href="#android签名" class="header-anchor">#</a> android签名</h4> <p>https://ask.dcloud.net.cn/article/35777</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>cordova platform <span class="token function">add</span> android@6.2.0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="解决报错"><a href="#解决报错" class="header-anchor">#</a> 解决报错：</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>Error: Could not find gradle wrapper within Android SDK. Might need to update your Android SDK - Android

cordova platform rm android
cordova platform add android@6.2.0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><a href="https://stackoverflow.com/questions/42613882/error-could-not-find-gradle-wrapper-within-android-sdk-might-need-to-update-yo" target="_blank" rel="noopener noreferrer">参考链接<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h4 id="签名"><a href="#签名" class="header-anchor">#</a> 签名：</h4> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>cordova build android --release -- --keystore<span class="token operator">=</span><span class="token string">&quot;..\my-store\gfy.keystore&quot;</span> --storePassword<span class="token operator">=</span><span class="token number">123456</span> --alias<span class="token operator">=</span>gfy
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="生成签名证书"><a href="#生成签名证书" class="header-anchor">#</a> 生成签名证书</h4> <p>使用keytool -genkey命令生成证书：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>复制代码keytool -genkey -alias testalias -keyalg RSA -keysize 2048 -validity 36500 -keystore test.keystore
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>testalias是证书别名，可修改为自己想设置的字符，建议使用英文字母和数字</li> <li>test.keystore是证书文件名称，可修改为自己想设置的文件名称，也可以指定完整文件路径</li> <li>36500是证书的有效期，表示100年有效期，单位天，建议时间设置长一点，避免证书过期</li></ul> <p>给apk包签名，使用jarsigner工具的命令格式是：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>jarsigner的命令格式

jarsigner -verbose -keystore [您的私钥存放路径] -signedjar [签名后文件存放路径] [未签名的文件路径] [您的证书名称]

#jarsigner的参数说明

-keystore 参数指定您的私钥的绝对路径，例如：c:\mykeystore
-signedjar 参数指定签名后apk文件存放绝对的路径，例如 c:\signed.apk
[未签名的文件路径] 指定要签名apk文件的绝对路径，也就是您从我们这里下载到的，例如 c:\unsigned.apk
[您的证书名称] 是指您创建密钥时，您设置的证书名称
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>参考：<a href="https://blog.csdn.net/qq_36267538/article/details/84971948" target="_blank" rel="noopener noreferrer">使用jarsigner工具签名<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，<a href="https://www.jianshu.com/p/53078d03c9bf" target="_blank" rel="noopener noreferrer">Android-APK签名工具-jarsigner和apksigner<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="打包ios-ipa"><a href="#打包ios-ipa" class="header-anchor">#</a> 打包ios ipa</h3> <blockquote><p>cordova build ios</p></blockquote> <p>再运行xcode，打开Cordova ios 文件夹，在xcode执行一次build</p> <h3 id="优化apk"><a href="#优化apk" class="header-anchor">#</a> 优化apk：</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>zipalign -v <span class="token number">4</span> android-release.apk.apk ai-learn.apk
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>阿里云镜像</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>maven{url 'http://maven.aliyun.com/nexus/content/groups/public/'}

maven{ url &quot;https://jitpack.io&quot;}

google()

jcenter()
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>全朗e家打包命令（Android）</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>sudo cordova build android --release &amp;&amp; jarsigner -verbose -keystore gfy.keystore-signedjar gfy_praent.apk /Users/it/code/prod/parent-community_android/cordova-parent/platforms/android/app/build/outputs/apk/release/app-release-unsigned.apk gfy
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>教师app打包命令（Android）</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>sudo cordova build android --release &amp;&amp; jarsigner -verbose -keystore webteacher -signedjar gfy_signed.apk /Users/it/code/teacher-app/webapp-teacher/platforms/android/app/build/outputs/apk/release/app-release-unsigned.apk key0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="问题解决记录"><a href="#问题解决记录" class="header-anchor">#</a> 问题解决记录</h2> <h4 id="cordova禁止横屏"><a href="#cordova禁止横屏" class="header-anchor">#</a> cordova禁止横屏</h4> <p>https://blog.csdn.net/u010377383/article/details/77930198</p> <p>在config.xml</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;preference name=&quot;orientation&quot; value=&quot;portrait&quot; /&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="could-not-find-tools-jar-问题处理"><a href="#could-not-find-tools-jar-问题处理" class="header-anchor">#</a> Could not find tools.jar 问题处理</h4> <p>Android 打包遇到</p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token builtin">Could</span> not <span class="token builtin">find</span> tools<span class="token punctuation">.</span>jar
<span class="token builtin">Please</span> check that <span class="token operator">/</span><span class="token builtin">Library</span><span class="token operator">/</span><span class="token builtin">Internet</span> <span class="token builtin">Plug</span><span class="token operator">-</span><span class="token builtin">Ins</span><span class="token operator">/</span><span class="token builtin">JavaAppletPlugin</span><span class="token punctuation">.</span>plugin<span class="token operator">/</span><span class="token builtin">Contents</span><span class="token operator">/</span><span class="token builtin">Home</span> <span class="token builtin">contains</span> a valid <span class="token constant">JDK</span> installation<span class="token punctuation">.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h5 id="解决方案"><a href="#解决方案" class="header-anchor">#</a> 解决方案:</h5> <p><strong>最简单的就直接把JDK文件夹中的tools.jar复制到了jre\lib下</strong></p> <p>1、首先查看地址</p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token comment">// 查看java版本</span>
java <span class="token operator">-</span>version

<span class="token comment">// 查看java安装路径</span>
java <span class="token operator">-</span>verbose

<span class="token comment">// 查看 JDK 位置的命令</span>
<span class="token operator">/</span>usr<span class="token operator">/</span>libexec<span class="token operator">/</span>java_home <span class="token operator">-</span>V（升级 <span class="token builtin">OSX11</span><span class="token punctuation">.</span><span class="token number">0.1</span> 后，执行这个命令可能看到两个路径，一个是 <span class="token constant">JDK</span> 的实际路径，另一个是：<span class="token operator">/</span><span class="token builtin">Library</span><span class="token operator">/</span><span class="token builtin">Internet</span> <span class="token builtin">Plug</span><span class="token operator">-</span><span class="token builtin">Ins</span><span class="token operator">/</span><span class="token builtin">JavaAppletPlugin</span><span class="token punctuation">.</span>plugin<span class="token operator">/</span><span class="token builtin">Contents</span><span class="token operator">/</span><span class="token builtin">Home</span><span class="token punctuation">,</span><span class="token punctuation">(</span>网上有资料说这个是 <span class="token constant">JRE</span> 的路径）。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>2、手动复制 tools.jar,下面第一个路径改为第一步获取的自己的路径</p> <div class="language-undefined line-numbers-mode"><pre class="language-text"><code>sudo cp /Library/Java/JavaVirtualMachines/jdk1.8.0_191.jdk/Contents/Home/lib/tools.jar /Library/Internet\ Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/lib
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>这里的版本号要替换成第一条指令查询到的版本，之后授权即可</p> <h4 id="android高版本http网络请求失败的cordova配置处理"><a href="#android高版本http网络请求失败的cordova配置处理" class="header-anchor">#</a> Android高版本http网络请求失败的Cordova配置处理</h4> <p>https://www.jianshu.com/p/12ab6718e81c</p> <p><code>cordovaApp\platforms\android\app\src\main\AndroidManifest.xml</code>的文件里添加如下代码</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>application</span> <span class="token attr-name"><span class="token namespace">android:</span>usesCleartextTraffic</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/document/docs/vue添加路由转场动画.html" class="prev">
        vue添加路由转场动画
      </a></span> <span class="next"><a href="/document/docs/gfy-mobile-template.html">
        gfy-mobile-template
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/document/assets/js/app.53e7559d.js" defer></script><script src="/document/assets/js/2.faf7f4ea.js" defer></script><script src="/document/assets/js/15.c73f03e1.js" defer></script>
  </body>
</html>
